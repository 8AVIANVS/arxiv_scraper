<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>arXiv Paper Explorer</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                </svg>
                <span>arXiv Explorer</span>
            </div>

            <nav class="nav-menu">
                <a href="#" class="nav-item active" data-view="papers">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                        <polyline points="10 9 9 9 8 9"/>
                    </svg>
                    Papers
                </a>
                <a href="#" class="nav-item" data-view="dashboard">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7"/>
                        <rect x="14" y="3" width="7" height="7"/>
                        <rect x="14" y="14" width="7" height="7"/>
                        <rect x="3" y="14" width="7" height="7"/>
                    </svg>
                    Dashboard
                </a>
                <a href="#" class="nav-item" data-view="actions">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
                    </svg>
                    Actions
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="status-indicator">
                    <span class="status-dot" id="statusDot"></span>
                    <span class="status-text" id="statusText">Ready</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Papers View -->
            <div id="papersView" class="view active">
                <header class="view-header">
                    <h1>Research Papers</h1>
                    <p class="subtitle">Explore arXiv papers evaluated for startup viability</p>
                </header>

                <!-- Filters -->
                <div class="filters-bar">
                    <div class="search-box">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                        </svg>
                        <input type="text" id="searchInput" placeholder="Search papers, authors, topics...">
                    </div>

                    <div class="filter-group">
                        <select id="categoryFilter">
                            <option value="">All Categories</option>
                        </select>

                        <select id="sortFilter">
                            <option value="created-desc">Newest First</option>
                            <option value="created-asc">Oldest First</option>
                            <option value="score-desc">Highest Score</option>
                            <option value="score-asc">Lowest Score</option>
                            <option value="title-asc">Title A-Z</option>
                            <option value="title-desc">Title Z-A</option>
                        </select>

                        <div class="score-filter">
                            <label>Score:</label>
                            <input type="number" id="minScore" placeholder="Min" min="0" max="10" step="0.5">
                            <span>-</span>
                            <input type="number" id="maxScore" placeholder="Max" min="0" max="10" step="0.5">
                        </div>
                    </div>
                </div>

                <!-- Papers Grid -->
                <div class="papers-container">
                    <div id="papersGrid" class="papers-grid">
                        <!-- Papers will be loaded here -->
                    </div>

                    <div id="loadingIndicator" class="loading-indicator">
                        <div class="spinner"></div>
                        <span>Loading papers...</span>
                    </div>

                    <div id="emptyState" class="empty-state hidden">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        <h3>No papers found</h3>
                        <p>Try adjusting your filters or run the scraper to fetch new papers.</p>
                    </div>
                </div>

                <!-- Pagination -->
                <div id="pagination" class="pagination">
                    <button id="prevPage" class="btn btn-secondary" disabled>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="15 18 9 12 15 6"/>
                        </svg>
                        Previous
                    </button>
                    <span class="page-info">
                        Page <span id="currentPage">1</span> of <span id="totalPages">1</span>
                    </span>
                    <button id="nextPage" class="btn btn-secondary">
                        Next
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Dashboard View -->
            <div id="dashboardView" class="view">
                <header class="view-header">
                    <h1>Dashboard</h1>
                    <p class="subtitle">Overview of scraped papers and evaluation statistics</p>
                </header>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon blue">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14 2 14 8 20 8"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="totalPapers">0</span>
                            <span class="stat-label">Total Papers</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon green">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                <polyline points="22 4 12 14.01 9 11.01"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="evaluatedPapers">0</span>
                            <span class="stat-label">Evaluated</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon yellow">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="avgScore">-</span>
                            <span class="stat-label">Average Score</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon purple">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="12 6 12 12 16 14"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="lastScrape">-</span>
                            <span class="stat-label">Last Scrape</span>
                        </div>
                    </div>
                </div>

                <div class="charts-grid">
                    <div class="chart-card">
                        <h3>Score Distribution</h3>
                        <div id="scoreChart" class="chart-container">
                            <div class="bar-chart" id="scoreBarChart"></div>
                        </div>
                    </div>

                    <div class="chart-card">
                        <h3>Categories</h3>
                        <div id="categoryList" class="category-list"></div>
                    </div>
                </div>

                <div class="top-papers-section">
                    <h3>Top Rated Papers</h3>
                    <div id="topPapers" class="top-papers-list"></div>
                </div>
            </div>

            <!-- Actions View -->
            <div id="actionsView" class="view">
                <header class="view-header">
                    <h1>Actions</h1>
                    <p class="subtitle">Run scraper and evaluator tasks</p>
                </header>

                <div class="actions-grid">
                    <div class="action-card">
                        <div class="action-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                <polyline points="7 10 12 15 17 10"/>
                                <line x1="12" y1="15" x2="12" y2="3"/>
                            </svg>
                        </div>
                        <h3>Scrape Papers</h3>
                        <p>Fetch new papers from arXiv for the configured categories (cs, eess, stat).</p>
                        <div class="action-status" id="scraperStatus"></div>
                        <button id="runScraper" class="btn btn-primary">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="5 3 19 12 5 21 5 3"/>
                            </svg>
                            Run Scraper
                        </button>
                    </div>

                    <div class="action-card">
                        <div class="action-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                            </svg>
                        </div>
                        <h3>Evaluate Papers</h3>
                        <p>Score papers for startup viability using AI evaluation.</p>
                        <div class="eval-options">
                            <label for="evalRows">Papers to evaluate:</label>
                            <input type="number" id="evalRows" value="10" min="1" max="1000">
                        </div>
                        <div class="action-status" id="evaluatorStatus"></div>
                        <button id="runEvaluator" class="btn btn-primary">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="5 3 19 12 5 21 5 3"/>
                            </svg>
                            Run Evaluator
                        </button>
                    </div>
                </div>

                <div class="info-card">
                    <h3>About the System</h3>
                    <p>This application scrapes research papers from arXiv and evaluates them for startup viability using GPT-4o. Papers are scored from 1-10 based on their commercial potential.</p>
                    <ul>
                        <li><strong>Categories:</strong> Computer Science (cs), Electrical Engineering (eess), Statistics (stat)</li>
                        <li><strong>Lookback Window:</strong> Maximum 7 days of papers</li>
                        <li><strong>Evaluation Model:</strong> GPT-4o with startup viability scoring</li>
                    </ul>
                </div>
            </div>
        </main>
    </div>

    <!-- Paper Detail Modal -->
    <div id="paperModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" id="closeModal">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
            <div class="modal-body" id="modalBody">
                <!-- Paper details will be loaded here -->
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
